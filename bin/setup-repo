#!/usr/bin/env bash

echo "Enter the name of the repository:"
read repoName

mkdir $repoName
cd $repoName

git init
npx gitignore node
git remote add origin "git@github.com:esyoil-GmbH/$1.git"

lerna init

npx install-peerdeps -d @esyoil-gmbh/config-commitlint
npx install-peerdeps -d @esyoil-gmbh/config-eslint
npx install-peerdeps -d @esyoil-gmbh/config-husky
npx install-peerdeps -d @esyoil-gmbh/config-lint-staged
npx install-peerdeps -d @esyoil-gmbh/config-prettier
npx install-peerdeps -d @esyoil-gmbh/config-ts
npx install-peerdeps -d @esyoil-gmbh/config-tslint

cat <<JS >> .eslintrc.js
"use strict";

module.exports = {
  extends: [require.resolve("@esyoil-gmbh/config-eslint")],
};
JS

cat <<JS >> .huskyrc.js
"use strict";

module.exports = {
  ...require("@esyoil-gmbh/config-husky"),
};
JS

cat <<JS >> commitlint.config.js
"use strict";

module.exports = {
  extends: ["@esyoil-gmbh/config-commitlint"],
};
JS

cat <<JS >> lint-staged.config.js
"use strict";

module.exports = {
  ...require("@esyoil-gmbh/config-lint-staged"),
};
JS

cat <<JS >> prettier.config.js
"use strict";

module.exports = {
  ...require("@esyoil-gmbh/config-prettier"),
};
JS

cat <<JSON >> tsconfig.json
{
  "extends": "@esyoil-gmbh/config-ts/lib/tsconfig.json",
}
JSON

cat <<JSON >> tslint.json
{
  "extends": [
    "@esyoil-gmbh/config-tslint"
  ]
}
JSON

npm i
git add -A

git commit -m "chore: initial commit"
